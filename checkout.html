<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Amazon | Checkout</title>
     <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4Q6Gf2aSP4eDXB8Miphtr37CMZZQ5oXLH2yaXMJ2w8e2ZtHTl7GptT4jmndRuHDT" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css" integrity="sha512-Evv84Mr4kqVGRNSgIGL/F/aIDqQb7xQ2vcrdIwxfjThSH8CSR7PBEakCr51Ck+w+/U6swU2Im1vVX0SVk9ABhg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="landing.css">
</head>
<body>
    <header>
         <!--Nav itens here-->
        <nav class="navbar navbar-expand-lg navbar-light bg-white">
            <div class="container">
                <img src="./images/Foodies logo without Banner 1.png" style="width: 50px; height: 50px" alt="">
                <div class="position-relative me-3 d-lg-none d-md-none">
                    <a href="cart.html" class="nav-link">
                    <i class="fa-solid fa-cart-shopping fa-2x"></i>
                    <span id="cartCount" class="badge bg-danger position-absolute top-0 start-100 translate-middle">0</span>
                  </a>
                    <!-- <a href="./cart.html"><i class="fa-solid fa-bag-shopping fa-2x w-75" style="color: #0F0B0B; " ></i></a> 
                    <span class="badge rounded-pill bg-danger position-absolute top-0 start-100 translate-middle">
                        5
                        <span class="visually-hidden">items in cart</span>
                    </span> -->
                </div>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarSupportedContent">
                    <ul class="navbar-nav mx-auto mb-2 mb-lg-0 ">
                    <li class="nav-item mx-3">
                        <a class="nav-link text-dark fw-bold"  href="./index.html">Home</a>
                    </li>
                    <li class="nav-item mx-3">
                        <a class="nav-link NavClr "  href="./product-page.html">Our Products</a>
                    </li>
                    <li class="nav-item mx-3">
                        <a class="nav-link NavClr"  href="./health-benefit.html">Health Benefits</a>
                    </li>
                    <li class="nav-item mx-3">
                        <a class="nav-link NavClr "  href="#">Blogs</a>
                    </li>
                    <li class="nav-item mx-3">
                        <a class="nav-link NavClr"  href="#">FAQS</a>
                    </li>
                    </ul>
                    
                    <form class="d-flex">
                        <div class="d-flex align-items-center">
                            <span class="input-group-text border-0 me-lg-5 pe-lg-4" id="search-addon">
                            <i class="fas fa-search"></i>
                            </span>
                            <!-- Icons -->
                            <a class="text-reset me-3" href="#">
                            <i class="fa-regular fa-heart"></i>
                            </a>
                           <div class="position-relative me-3">
                                <a href="cart.html" class="nav-link">
                                    <i class="fa-solid fa-cart-shopping fa-2x"></i>
                                    <span id="cartCount" class="badge bg-danger position-absolute top-0 start-100 translate-middle">0</span>
                                </a>
                                <!-- <a href="./cart.html"><i class="fa-solid fa-bag-shopping fa-2x w-75" style="color: #0F0B0B; " ></i></a> 
                                <span class="badge rounded-pill bg-danger position-absolute top-0 start-100 translate-middle">
                                    5
                                    <span class="visually-hidden">items in cart</span>
                                </span> -->
                            </div>
                                 <!-- User Icon with Badge -->
                            <div id="userContainer" style="position: relative; display: inline-block; z-index: 1200;">
                                <!-- use a button so it's always clickable and accessible -->
                                <button id="logoutBtn" type="button" class="btn btn-link p-0" aria-label="User menu"
                                        style="border: none; background: transparent; cursor: pointer;">
                                    <i id="logoutIcon" class="fa-solid fa-user me-3" style="color: #333;"></i>
                                </button>

                                <!-- badge -->
                                <span id="loginBadge"
                                    style="display:none; position: absolute; top: 0; right: -6px; 
                                        background: #00A859; color: #fff; font-size: 10px; 
                                        padding: 2px 6px; border-radius: 50%; pointer-events: none;" class="ms-3">
                                        âœ“
                                </span>
                            </div>

                            <button class="btn btn-success ms-3" type="submit">Contact us</button>
                        </div>
                    </form>
                </div>
            </div>
        </nav>
        <!-- nav section ends here  -->
    </header>

    <main>
        <!-- payment details section  -->
        <div class="container mt-lg-5 mt-5 pt-lg-5">
            <div class="">
                <form action="" id="checkoutForm">
                    <div class="row">
                    <div class="col-sm-12 col-md-12 col-lg-7">
                    <form class="form" id="checkoutForm">
                            <div class="">
                                <label for="formGroupExampleInput" class="form-label">Billing Details</label>
                                <input type="email" class="form-control width21 mt-lg-3" id="email" placeholder="your email address">
                            </div> 

                            
                            <div class="div col-12 col-md-4">
                                <label for="country" class="form-label mt-lg-4 mt-4">Country</label>
                                <select id="country" name="country" class="form-select width21" required>
                                  <option value="">Select Country</option>
                                </select>
                            </div>

                            <div class="d-flex gap-lg-4 gap-4  mt-lg-4 mt-4">
                                <div>
                                    <input type="text" class="width212 form-control" id="firstName" placeholder="Your first name">
                                </div>
                                <div class="div">
                                    <input type="text" class="width212 form-control" id="lastName" placeholder="Your last name">
                                </div>
                            </div>

                            <div class="">
                                <input type="text" class="form-control width21 mt-lg-3 mt-3" id="address" placeholder="Your delivery address">
                            </div>

                            <div class="d-flex gap-2 gap-lg-4 mt-lg-4 mt-4">
                                <div>
                                  <!-- <label for="state" class="form-label mt-lg-4 mt-4">State</label> -->
                                    <select id="state" name="state" class="form-select width213" required >
                                      <option value="">Select State</option>
                                    </select>
                                    <!-- <input type="text" class="width213  form-control" id="city" placeholder="City"> -->
                                </div>
                                <div>
                                     <!-- <label for="city">City</label> -->
                                      <select id="city" name="city"  class="form-select width213" required >
                                        <option value="">Select City</option>
                                      </select>
                                    <!-- <select class="form-select width213"  aria-label="Default select example">
                                        <option selected>ikeja</option>
                                        <option value="1">ajah</option>
                                        <option value="2">lakki</option>
                                        <option value="3">victoria island</option>
                                    </select> -->
                                </div>
                                <div class="div">
                                    <input type="text" class="width213  form-control" placeholder="Zipcode">
                                </div>
                            </div>

                            <div class="">
                                <input type="number" class="form-control width21 mt-lg-3 mt-3" id="phone" placeholder="Your phone number">
                            </div>

                            <div class="div mt-lg-4 mt-4">
                                <label for="exampleFormControlTextarea1" class="form-label">Order Note (optional)</label>
                                <textarea class="form-control width214" id="exampleFormControlTextarea1" placeholder="Tell us what do you think" rows="3"></textarea>
                            </div>
                        </form>
                    </div>

                    <div class="col-sm-12 col-md-12 col-lg-5 mt-lg-0 mt-4">
                        <p class="popupblack mb-lg-3">Your Order</p>
                    <div id="Summary1" class="mt-lg-0 mt-3">
                        
                    </div>
                         <!-- <p class="mt-3 PAYwith">Pay With</p>

                        <div class="form-check">
                        <input class="form-check-input" type="radio" name="paymentMethod" id="bankTransfer" value="bank" checked>
                        <label class="form-check-label fw-bold" for="bankTransfer">Bank Transfer</label>
                        </div>

                        <div class="form-check mt-2">
                        <input class="form-check-input" type="radio" name="paymentMethod" id="paystack" value="paystack">
                        <label class="form-check-label fw-bold" for="paystack">
                            Paystack <img src="./images/128px-Paystack_Logo.png" alt="" style="height:20px;">
                        </label>
                        </div>

                        <div class="form-check mt-2">
                        <input class="form-check-input" type="radio" name="paymentMethod" id="paypal" value="paypal">
                        <label class="form-check-label fw-bold" for="paypal">
                            PayPal <img src="./images/Login/image 820.png" alt="" style="height:20px;">
                        </label>
                        </div>

                        <hr>

                        <div id="bankDetails" class="payment-section">
                        <h5>Bank Transfer Details</h5>
                        <p>Send payment to:</p>
                        <p><strong>Account Name:</strong> MyCompany Ltd</p>
                        <p><strong>Account Number:</strong> 1234567890</p>
                        <p><strong>Bank:</strong> Example Bank</p>
                        </div>

                        
                        <p><strong>Total: â‚¦<span id="cartTotal">0</span></strong></p> -->

                        <div class="mt-4">
                        <button id="placeOrderBtn" class="btn placeOrderBtn  fs-5 px-5" type="button" onclick="placeOrder(event)">Place Order</button>
                        </div> 

                    </div>
                    </div>
                </form>
                


                  <!-- <script>
                    
                    // Render cart items from localStorage
                    function renderCartSummary() {
                        const cart = JSON.parse(localStorage.getItem("site_cart_v1")) || [];
                        const summary = document.getElementById("orderSummary");
                        const totalElem = document.getElementById("cartTotal");
                        summary.innerHTML = "";

                        let total = 0;

                        cart.forEach(item => {
                        const li = document.createElement("li");
                        li.className = "list-group-item d-flex justify-content-between";
                        li.innerHTML = `
                            <div>${item.name}</div>
                            <span>â‚¦${Number(item.price).toLocaleString()}</span>
                        `;
                        summary.appendChild(li);
                        total += Number(item.price);
                        });

                        totalElem.textContent = "â‚¦" + total.toLocaleString();
                        return total;
                    }

                    document.addEventListener("DOMContentLoaded", renderCartSummary);

                    // Place Order
                    document.getElementById("placeOrderBtn").addEventListener("click", async () => {
                        try {
                        const cart = JSON.parse(localStorage.getItem("site_cart_v1")) || [];
                        if (cart.length === 0) {
                            alert("Your cart is empty!");
                            return;
                        }

                        // gather customer details
                        const customerSnapshot = {
                            firstName: document.getElementById("firstName").value,
                            lastName: document.getElementById("lastName").value,
                            email: document.getElementById("email").value,
                            phone: document.getElementById("phone").value,
                            address: document.getElementById("address").value,
                            city: document.getElementById("city").value,
                            state: document.getElementById("state").value
                        };

                        const totalAmount = renderCartSummary();

                        const response = await fetch("http://localhost:3001/orders/create", {
                            method: "POST",
                            headers: { "Content-Type": "application/json" },
                            body: JSON.stringify({
                            customerId: "customerid", // replace with real logged-in user ID
                            customerSnapshot,
                            items: cart.map(item => ({
                                productId: item.id,
                                productName: item.name,
                                quantity: 1,
                                unitPrice: item.price
                            })),
                            totalAmount
                            })
                        });

                        if (!response.ok) throw new Error("Failed to create order");

                        const data = await response.json();

                        if (data.authorizationUrl) {
                            window.location.href = data.authorizationUrl;
                        } else {
                            alert("Payment initialization failed.");
                        }
                        } catch (err) {
                        console.error(err);
                        alert("Error placing order. Try again.");
                        }
                    });
                </script>   -->

                  <!-- <script>
                    function getCartTotal() {
                        const cart = JSON.parse(localStorage.getItem("site_cart_v1") || "[]");
                        return cart.reduce((sum, item) => sum + (Number(item.price) * (item.quantity || 1)), 0);
                        }

                </script>

                <script>
                    document.getElementById("cartTotal").textContent = getCartTotal().toFixed(2);

                </script>

                <script>
                    document.getElementById("placeOrderBtn").addEventListener("click", function () {
                    const selectedPayment = document.querySelector('input[name="paymentMethod"]:checked').value;
                    const totalAmount = getCartTotal();

                    if (selectedPayment === "bank") {
                        alert("Please complete your payment via bank transfer. Total: â‚¦" + totalAmount);
                    }

                if (selectedPayment === "paystack") {
                    const handler = PaystackPop.setup({
                        key: "sk_test_8a0385fad55d4aa441b1e0e3df1dbd079e8b8d44",
                        email: document.getElementById("email").value,
                        amount: totalAmount * 100, // kobo
                        currency: "NGN",
                        callback: function (response) {
                            alert("Payment successful! Reference: " + response.reference);
                            // send order + reference to backend here
                        },
                        onClose: function () {
                            alert("Transaction was not completed, window closed.");
                        }
                    });
                    handler.openIframe();
                }

                    if (selectedPayment === "paypal") {
                        alert("PayPal checkout coming soon. Total: â‚¦" + totalAmount);
                    }
                });

                </script>   -->

                  

                
                
                

                <script>
                    function parseJwt(token) {
                      try {
                        const base64Url = token.split(".")[1];
                        const base64 = base64Url.replace(/-/g, "+").replace(/_/g, "/");
                        return JSON.parse(window.atob(base64));
                      } catch (err) {
                        console.error(":x: Invalid token", err);
                        return null;
                      }
                    }

                    document.addEventListener("DOMContentLoaded", () => {
        const btn = document.getElementById("placeOrderBtn");
        if (!btn) return console.error(":x: placeOrderBtn not found in DOM");

        btn.addEventListener("click", async (e) => {
          e.preventDefault();
          console.log(":large_green_circle: Place Order clicked");

          // Collect form values
          const firstName = document.getElementById("firstName")?.value.trim();
          const lastName = document.getElementById("lastName")?.value.trim();
          const email = document.getElementById("email")?.value.trim();
          const phone = document.getElementById("phone")?.value.trim();
          const address = document.getElementById("address")?.value.trim();
          const country = document.getElementById("country")?.value.trim();
          const state = document.getElementById("state")?.value.trim();
          const city = document.getElementById("city")?.value.trim();

          if (!firstName || !lastName || !email || !phone || !state || !city || !address || !country) {
            return Swal.fire({
              icon: "warning",
              title: "Missing Information",
              text: "Please fill in all required fields.",
              confirmButtonColor: "#F58634"
            });
          }

          // Decode token
          const token = localStorage.getItem("key");
          const decoded = parseJwt(token);
          const customerId = decoded?.id || decoded?._id || decoded?.userId;
          if (!customerId) {
            return Swal.fire({
              icon: "warning",
              title: "Login Required",
              text: "You must be logged in to place an order.",
              confirmButtonColor: "#F58634"
            }).then(() => window.location.href = "./login.html");
          }

          // Load cart
          const cart = JSON.parse(localStorage.getItem("site_cart_v1")) || [];
          if (!cart.length) {
            return Swal.fire({
              icon: "warning",
              title: "Empty Cart",
              text: "Your cart is empty. Please add items before placing an order.",
              confirmButtonColor: "#F58634"
            });
          }

          // Format items & totals
          const items = cart.map(item => ({
            productId: item.id,
            name: item.name,
            image: item.image,
            price: item.price,
            quantity: item.quantity,
            subTotal: item.price * item.quantity
          }));
          const originalPrice = items.reduce((acc, item) => acc + item.subTotal, 0);
          const savings = Math.round(originalPrice * 0.05);
          const estimatedTax = Math.round((originalPrice - savings) * 0.05);
          const total = originalPrice - savings + estimatedTax;

          // Step 1: Create order in backend (which also initializes Paystack)
          const orderPayload = {
            customerId,
            customerSnapshot: { firstName, lastName, email, phone, state, city, address, country },
            items,
            totalAmount: total,
            // quantity: items.reduce((acc, item) => acc + item.quantity, 0)
          };

          console.log(":rocket: Sending order payload:", orderPayload);

          try {
            const response = await fetch("http://localhost:3001/amazon/document/api/orders/create", {
              method: "POST",
              headers: { "Content-Type": "application/json" },
              body: JSON.stringify(orderPayload),
            });

            if (!response.ok) {
              const text = await response.text();
              throw new Error(`Backend returned HTTP ${response.status}: ${text}`);
            }

            const orderData = await response.json();
            console.log(":large_blue_circle: Backend response:", orderData);

            if (!orderData.success || !orderData.authorizationUrl) {
              throw new Error(orderData.message || "Order creation failed");
            }

            Swal.fire({
              icon: "success",
              title: "Order Created!",
              text: "Redirecting to Paystack for secure payment...",
              showConfirmButton: false,
              timer: 2000
            }).then(() => window.location.href = orderData.authorizationUrl);

          } catch (err) {
            console.error(":x: Order/Payment error:", err);
            Swal.fire({
              icon: "error",
              title: "Order Failed",
              text: err.message,
              confirmButtonColor: "#F58634"
            });
          }
        });
      });
                </script>

                <script>
              // âœ… Local dataset for Nigeria (States + LGAs)
              const nigeriaStatesAndLGAs = {
                "Abia": ["Aba North","Aba South","Arochukwu","Bende","Ikwuano","Isiala Ngwa North","Isiala Ngwa South","Isuikwuato","Obi Ngwa","Ohafia","Osisioma","Ugwunagbo","Ukwa East","Ukwa West","Umuahia North","Umuahia South","Umu Nneochi"],
                "Adamawa": ["Demsa","Fufure","Ganye","Girei","Gombi","Guyuk","Hong","Jada","Lamurde","Madagali","Maiha","Mayo-Belwa","Michika","Mubi North","Mubi South","Numan","Shelleng","Song","Toungo","Yola North","Yola South"],
                "Akwa Ibom": ["Abak","Eastern Obolo","Eket","Esit Eket","Essien Udim","Etim Ekpo","Etinan","Ibeno","Ibesikpo Asutan","Ibiono Ibom","Ika","Ikono","Ikot Abasi","Ikot Ekpene","Ini","Itu","Mbo","Mkpat Enin","Nsit Atai","Nsit Ibom","Nsit Ubium","Obot Akara","Okobo","Onna","Oron","Oruk Anam","Udung Uko","Ukanafun","Uruan","Urue-Offong/Oruko","Uyo"],
                "Anambra": ["Aguata","Anambra East","Anambra West","Anaocha","Awka North","Awka South","Ayamelum","Dunukofia","Ekwusigo","Idemili North","Idemili South","Ihiala","Njikoka","Nnewi North","Nnewi South","Ogbaru","Onitsha North","Onitsha South","Orumba North","Orumba South","Oyi"],
                "Bauchi": ["Alkaleri","Bauchi","Bogoro","Damban","Darazo","Dass","Gamawa","Ganjuwa","Giade","Itas/Gadau","Jamaâ€™are","Katagum","Kirfi","Misau","Ningi","Shira","Tafawa Balewa","Toro","Warji","Zaki"],
                "Bayelsa": ["Brass","Ekeremor","Kolokuma/Opokuma","Nembe","Ogbia","Sagbama","Southern Ijaw","Yenagoa"],
                "Benue": ["Ado","Agatu","Apa","Buruku","Gboko","Guma","Gwer East","Gwer West","Katsina-Ala","Konshisha","Kwande","Logo","Makurdi","Obi","Ogbadibo","Ohimini","Oju","Okpokwu","Otukpo","Tarka","Ukum","Ushongo","Vandeikya"],
                "Borno": ["Abadam","Askira/Uba","Bama","Bayo","Biu","Chibok","Damboa","Dikwa","Gubio","Guzamala","Gwoza","Hawul","Jere","Kaga","Kala/Balge","Konduga","Kukawa","Kwaya Kusar","Mafa","Magumeri","Maiduguri","Marte","Mobbar","Monguno","Ngala","Nganzai","Shani"],
                "Cross River": ["Abi","Akamkpa","Akpabuyo","Bakassi","Bekwarra","Biase","Boki","Calabar Municipal","Calabar South","Etung","Ikom","Obanliku","Obubra","Obudu","Odukpani","Ogoja","Yakuur","Yala"],
                "Delta": ["Aniocha North","Aniocha South","Bomadi","Burutu","Ethiope East","Ethiope West","Ika North East","Ika South","Isoko North","Isoko South","Ndokwa East","Ndokwa West","Okpe","Oshimili North","Oshimili South","Patani","Sapele","Udu","Ughelli North","Ughelli South","Ukwuani","Uvwie","Warri North","Warri South","Warri South West"],
                "Ebonyi": ["Abakaliki","Afikpo North","Afikpo South","Ebonyi","Ezza North","Ezza South","Ikwo","Ishielu","Ivo","Izzi","Ohaozara","Ohaukwu","Onicha"],
                "Edo": ["Akoko-Edo","Egor","Esan Central","Esan North-East","Esan South-East","Esan West","Etsako Central","Etsako East","Etsako West","Igueben","Ikpoba-Okha","Orhionmwon","Oredo","Ovia North-East","Ovia South-West","Owan East","Owan West","Uhunmwonde"],
                "Ekiti": ["Ado Ekiti","Efon","Ekiti East","Ekiti South-West","Ekiti West","Emure","Gbonyin","Ido Osi","Ijero","Ikere","Ikole","Ilejemeje","Irepodun/Ifelodun","Ise/Orun","Moba","Oye"],
                "Enugu": ["Aninri","Awgu","Enugu East","Enugu North","Enugu South","Ezeagu","Igbo Etiti","Igbo Eze North","Igbo Eze South","Isi Uzo","Nkanu East","Nkanu West","Nsukka","Oji River","Udenu","Udi","Uzo-Uwani"],
                "Gombe": ["Akko","Balanga","Billiri","Dukku","Funakaye","Gombe","Kaltungo","Kwami","Nafada","Shongom","Yamaltu/Deba"],
                "Imo": ["Aboh Mbaise","Ahiazu Mbaise","Ehime Mbano","Ezinihitte","Ideato North","Ideato South","Ihitte/Uboma","Ikeduru","Isiala Mbano","Isu","Mbaitoli","Ngor Okpala","Njaba","Nkwerre","Nwangele","Obowo","Oguta","Ohaji/Egbema","Okigwe","Onuimo","Orlu","Orsu","Oru East","Oru West","Owerri Municipal","Owerri North","Owerri West"],
                "Jigawa": ["Auyo","Babura","Biriniwa","Birnin Kudu","Buji","Dutse","Gagarawa","Garki","Gumel","Guri","Gwaram","Gwiwa","Hadejia","Jahun","Kafin Hausa","Kaugama","Kazaure","Kiri Kasama","Kiyawa","Maigatari","Malam Madori","Miga","Ringim","Roni","Sule Tankarkar","Taura","Yankwashi"],
                "Kaduna": ["Birnin Gwari","Chikun","Giwa","Igabi","Ikara","Jaba","Jema'a","Kachia","Kaduna North","Kaduna South","Kagarko","Kajuru","Kaura","Kauru","Kubau","Kudan","Lere","Makarfi","Sabon Gari","Sanga","Soba","Zangon Kataf","Zaria"],
                "Kano": ["Ajingi","Albasu","Bagwai","Bebeji","Bichi","Bunkure","Dala","Dambatta","Dawakin Kudu","Dawakin Tofa","Doguwa","Fagge","Gabasawa","Garko","Garun Mallam","Gaya","Gezawa","Gwale","Gwarzo","Kabo","Kano Municipal","Karaye","Kibiya","Kiru","Kumbotso","Kunchi","Kura","Madobi","Makoda","Minjibir","Nasarawa","Rano","Rimin Gado","Rogo","Shanono","Sumaila","Takai","Tarauni","Tofa","Tsanyawa","Tudun Wada","Ungogo","Warawa","Wudil"],
                "Katsina": ["Bakori","Batagarawa","Batsari","Baure","Bindawa","Charanchi","Dan Musa","Dandume","Danja","Daura","Dutsi","Dutsin-Ma","Faskari","Funtua","Ingawa","Jibia","Kafur","Kaita","Kankara","Kankia","Katsina","Kurfi","Kusada","Mai'Adua","Malumfashi","Mani","Mashi","Matazu","Musawa","Rimi","Sabuwa","Safana","Sandamu","Zango"],
                "Kebbi": ["Aleiro","Arewa Dandi","Argungu","Augie","Bagudo","Birnin Kebbi","Bunza","Dandi","Fakai","Gwandu","Jega","Kalgo","Koko/Besse","Maiyama","Ngaski","Sakaba","Shanga","Suru","Wasagu/Danko","Yauri","Zuru"],
                "Kogi": ["Adavi","Ajaokuta","Ankpa","Bassa","Dekina","Ibaji","Idah","Igalamela Odolu","Ijumu","Kabba/Bunu","Kogi","Lokoja","Mopa-Muro","Ofu","Ogori/Magongo","Okehi","Okene","Olamaboro","Omala","Yagba East","Yagba West"],
                "Kwara": ["Asa","Baruten","Edu","Ekiti","Ifelodun","Ilorin East","Ilorin South","Ilorin West","Irepodun","Isin","Kaiama","Moro","Offa","Oke Ero","Oyun","Pategi"],
                "Lagos": ["Agege","Ajeromi-Ifelodun","Alimosho","Amuwo-Odofin","Apapa","Badagry","Epe","Eti-Osa","Ibeju-Lekki","Ifako-Ijaiye","Ikeja","Ikorodu","Kosofe","Lagos Island","Lagos Mainland","Mushin","Ojo","Oshodi-Isolo","Shomolu","Surulere"],
                "Nasarawa": ["Akwanga","Awe","Doma","Karu","Keana","Keffi","Kokona","Lafia","Nasarawa","Nasarawa Egon","Obi","Toto","Wamba"],
                "Niger": ["Agaie","Agwara","Bida","Borgu","Bosso","Chanchaga","Edati","Gbako","Gurara","Katcha","Kontagora","Lapai","Lavun","Magama","Mariga","Mashegu","Mokwa","Muya","Paikoro","Rafi","Rijau","Shiroro","Suleja","Tafa","Wushishi"],
                "Ogun": ["Abeokuta North","Abeokuta South","Ado-Odo/Ota","Egbado North","Egbado South","Ewekoro","Ifo","Ijebu East","Ijebu North","Ijebu North East","Ijebu Ode","Ikenne","Imeko Afon","Ipokia","Obafemi Owode","Odeda","Odogbolu","Ogun Waterside","Remo North","Shagamu"],
                "Ondo": ["Akoko North-East","Akoko North-West","Akoko South-West","Akoko South-East","Akure North","Akure South","Ese Odo","Idanre","Ifedore","Ilaje","Ile Oluji/Okeigbo","Irele","Odigbo","Okitipupa","Ondo East","Ondo West","Ose","Owo"],
                "Osun": ["Atakunmosa East","Atakunmosa West","Aiyedaade","Aiyedire","Boluwaduro","Boripe","Ede North","Ede South","Ife Central","Ife East","Ife North","Ife South","Egbedore","Ejigbo","Ifedayo","Ifelodun","Ila","Ilesa East","Ilesa West","Irepodun","Irewole","Isokan","Iwo","Obokun","Odo Otin","Ola Oluwa","Olorunda","Oriade","Orolu","Osogbo"],
                "Oyo": ["Afijio","Akinyele","Atiba","Atisbo","Egbeda","Ibadan North","Ibadan North-East","Ibadan North-West","Ibadan South-East","Ibadan South-West","Ibarapa Central","Ibarapa East","Ibarapa North","Ido","Ifedayo","Ifelodun","Irepo","Iseyin","Itesiwaju","Iwajowa","Kajola","Lagelu","Ogbomosho North","Ogbomosho South","Ogo Oluwa","Olorunsogo","Oluyole","Ona Ara","Orelope","Ori Ire","Oyo","Oyo East","Saki East","Saki West","Surulere"],
                "Plateau": ["Bokkos","Barkin Ladi","Bassa","Jos East","Jos North","Jos South","Kanam","Kanke","Langtang South","Langtang North","Mangu","Mikang","Pankshin","Quaâ€™an Pan","Riyom","Shendam","Wase"],
                "Rivers": ["Abua/Odual","Ahoada East","Ahoada West","Akuku-Toru","Andoni","Asari-Toru","Bonny","Degema","Eleme","Emuoha","Etche","Gokana","Ikwerre","Khana","Obio/Akpor","Ogba/Egbema/Ndoni","Ogu/Bolo","Okrika","Omuma","Opobo/Nkoro","Oyigbo","Port Harcourt","Tai"],
                "Sokoto": ["Binji","Bodinga","Dange Shuni","Gada","Goronyo","Gudu","Gwadabawa","Illela","Isa","Kebbe","Kware","Rabah","Sabon Birni","Shagari","Silame","Sokoto North","Sokoto South","Tambuwal","Tangaza","Tureta","Wamako","Wurno","Yabo"],
                "Taraba": ["Ardo Kola","Bali","Donga","Gashaka","Gassol","Ibi","Jalingo","Karim Lamido","Kumi","Lau","Sardauna","Takum","Ussa","Wukari","Yorro","Zing"],
                "Yobe": ["Bade","Bursari","Damaturu","Fika","Fune","Geidam","Gujba","Gulani","Jakusko","Karasuwa","Machina","Nangere","Nguru","Potiskum","Tarmuwa","Yunusari","Yusufari"],
                "Zamfara": ["Anka","Bakura","Birnin Magaji/Kiyaw","Bukkuyum","Bungudu","Gummi","Gusau","Kaura Namoda","Maradun","Maru","Shinkafi","Talata Mafara","Chafe","Zurmi"],
                "Federal Capital Territory": ["Abaji","Bwari","Gwagwalada","Kuje","Kwali","Municipal Area Council"]
              };

              // âœ… Get dropdown elements
              const countryDropdown = document.getElementById("country");
              const stateDropdown = document.getElementById("state");
              const cityDropdown = document.getElementById("city");

              // âœ… Load countries (with ?fields=name fix)
              async function loadCountries() {
                try {
                  const res = await fetch("https://restcountries.com/v3.1/all?fields=name");
                  const data = await res.json();
                  const countries = data.map(c => c.name.common).sort();

                  countryDropdown.innerHTML = `<option value="">Select Country</option>`;
                  countries.forEach(country => {
                    countryDropdown.innerHTML += `<option value="${country}">${country}</option>`;
                  });
                  console.log("âœ… Countries loaded:", countries.length);
                } catch (err) {
                  console.error("Error loading countries:", err);
                }
              }

              // âœ… Load states
              async function loadStates(country) {
                stateDropdown.innerHTML = `<option value="">Select State</option>`;
                cityDropdown.innerHTML = `<option value="">Select City</option>`;

                if (!country) return;

                if (country === "Nigeria") {
                  // Use local dataset
                  Object.keys(nigeriaStatesAndLGAs).forEach(state => {
                    stateDropdown.innerHTML += `<option value="${state}">${state}</option>`;
                  });
                } else {
                  // API fallback for other countries
                  try {
                    const res = await fetch("https://countriesnow.space/api/v0.1/countries/states", {
                      method: "POST",
                      headers: { "Content-Type": "application/json" },
                      body: JSON.stringify({ country })
                    });
                    const result = await res.json();

                    if (result.data && result.data.states) {
                      result.data.states.forEach(st => {
                        stateDropdown.innerHTML += `<option value="${st.name}">${st.name}</option>`;
                      });
                    }
                    console.log("âœ… States loaded from local dataset:", Object.keys(nigeriaStatesAndLGAs).length);
                  } catch (err) {
                    console.error("Error loading states:", err);
                  }
                }
              }

              // âœ… Load cities
              async function loadCities(country, state) {
                cityDropdown.innerHTML = `<option value="">Select City</option>`;
                if (!state) return;

                if (country === "Nigeria") {
                  nigeriaStatesAndLGAs[state]?.forEach(city => {
                    cityDropdown.innerHTML += `<option value="${city}">${city}</option>`;
                  });
                  console.log("âœ… Cities loaded from local dataset:", nigeriaStatesAndLGAs[state]?.length || 0);
                } else {
                  try {
                    const res = await fetch("https://countriesnow.space/api/v0.1/countries/state/cities", {
                      method: "POST",
                      headers: { "Content-Type": "application/json" },
                      body: JSON.stringify({ country, state })
                    });
                    const result = await res.json();

                    if (result.data) {
                      result.data.forEach(city => {
                        cityDropdown.innerHTML += `<option value="${city}">${city}</option>`;
                      });
                    }
                  } catch (err) {
                    console.error("Error loading cities:", err);
                  }
                }
              }

              // âœ… Event listeners
              countryDropdown.addEventListener("change", e => loadStates(e.target.value));
              stateDropdown.addEventListener("change", e => loadCities(countryDropdown.value, e.target.value));

              // âœ… Init
              loadCountries();
              </script>

                <!-- <script>
  const countrySelect = document.getElementById("country");
  const stateSelect = document.getElementById("state");
  const citySelect = document.getElementById("city");

  // Load countries
  async function loadCountries() {
    try {
      const res = await fetch("https://restcountries.com/v3.1/all?fields=name");
      const data = await res.json();

      const countries = Array.isArray(data) ? data : [];

      countries.sort((a, b) => a.name.common.localeCompare(b.name.common));

      countries.forEach(c => {
        const opt = document.createElement("option");
        opt.value = c.name.common;
        opt.textContent = c.name.common;
        countrySelect.appendChild(opt);
      });

      // âœ… Auto-select Nigeria if available
      const defaultCountry = "Nigeria";
      const nigeriaOption = [...countrySelect.options].find(
        opt => opt.value === defaultCountry
      );
      if (nigeriaOption) {
        countrySelect.value = defaultCountry;
        await loadStates(defaultCountry); // load states immediately
      }
    } catch (err) {
      console.error("Error loading countries:", err);
    }
  }

  // Load states when country is selected
  async function loadStates(country) {
    try {
      stateSelect.innerHTML = `<option value="">Loading...</option>`;
      stateSelect.disabled = true;
      citySelect.innerHTML = `<option value="">Select City</option>`;
      citySelect.disabled = true;

      const res = await fetch("https://countriesnow.space/api/v0.1/countries/states", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ country })
      });
      const data = await res.json();

      stateSelect.innerHTML = `<option value="">Select State</option>`;
      if (data.data && data.data.states) {
        data.data.states.forEach(s => {
          const opt = document.createElement("option");
          opt.value = s.name;
          opt.textContent = s.name;
          stateSelect.appendChild(opt);
        });
      }

      stateSelect.disabled = false;
    } catch (err) {
      console.error("Error loading states:", err);
      stateSelect.innerHTML = `<option value="">No states found</option>`;
    }
  }

  // Load cities when state is selected
async function loadCities(country, state) {
  try {
    citySelect.innerHTML = `<option value="">Loading...</option>`;
    citySelect.disabled = true;

    const res = await fetch("https://countriesnow.space/api/v0.1/countries/state/cities", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ country, state })
    });
    const data = await res.json();

    // âœ… log AFTER defining "data"
    console.log("Fetching cities for:", country, state, data);

    citySelect.innerHTML = `<option value="">Select City</option>`;
    if (data.data && Array.isArray(data.data) && data.data.length > 0) {
      data.data.forEach(city => {
        const opt = document.createElement("option");
        opt.value = city;
        opt.textContent = city;
        citySelect.appendChild(opt);
      });
      citySelect.disabled = false;
    } else {
      citySelect.innerHTML = `<option value="">No cities found</option>`;
    }
  } catch (err) {
    console.error("Error loading cities:", err);
    citySelect.innerHTML = `<option value="">No cities found</option>`;
  }
}



  // Event listeners
  countrySelect.addEventListener("change", e => {
    const country = e.target.value;
    if (country) {
      loadStates(country);
    } else {
      stateSelect.innerHTML = `<option value="">Select State</option>`;
      stateSelect.disabled = true;
      citySelect.innerHTML = `<option value="">Select City</option>`;
      citySelect.disabled = true;
    }
  });

  stateSelect.addEventListener("change", e => {
    const state = e.target.value;
    const country = countrySelect.value;
    if (state && country) {
      loadCities(country, state);
    } else {
      citySelect.innerHTML = `<option value="">Select City</option>`;
      citySelect.disabled = true;
    }
  });

  // Initial load
  loadCountries();
                </script> -->
                
               









                    <!-- <p>Your Order</p>
                    <hr>
                    <div class="d-flex justify-content-between align-items-center">
                        <p>Original Price</p>
                        <p>$582.00</p>
                    </div>
                    <div class="d-flex justify-content-between align-items-center">
                        <p>Savings</p>
                        <p>$$82.00</p>
                    </div>
                    <div class="d-flex justify-content-between align-items-center">
                        <p>Shipping</p>
                        <p>FREE</p>
                    </div>
                    <div class="d-flex justify-content-between align-items-center">
                        <p>Estimated Sales Tax</p>
                        <p>$3.50</p>
                    </div>
                    <hr>
                    <div class="d-flex justify-content-between align-items-center">
                        <p class="fw-bold">Total</p>
                        <p class="fw-bold">$496.50</p>
                    </div> -->

                  
                    <!-- <p class="mt-3 PAYwith">Pay With</p>
                    <div class="form-check d-flex justify-content-between align-items-center">
                        <div class="div">
                                <input class="form-check-input" type="radio" name="exampleRadios" id="exampleRadios1" value="option1" checked>
                            <label class="form-check-label fw-bold" for="exampleRadios1">
                                Bank Transfer
                            </label>
                        </div>

                        <div class="div">
                            <input class="form-check-input me-lg-2" type="radio" name="exampleRadios" id="exampleRadios1" value="option1" checked>
                            <img src="./images/128px-Paystack_Logo.png" alt="">
                        </div>
                    </div>
                    <form action="">
                        <input type="text" class="width215 form-control mt-lg-4 mt-4" placeholder="Card number">

                        <div class="d-flex mt-lg-4 mt-4 gap-lg-3 gap-3">
                            <input type="text" class="width215 form-control" placeholder="Expiration date">
                            <input type="text" class="width215 form-control" placeholder="Security code">
                        </div>
                        <div class="d-flex mt-lg-4 mt-4 gap-lg-3 gap-3">
                            <input type="text" class="width215 form-control" placeholder="First name">
                            <input type="text" class="width215 form-control" placeholder="Last name">
                        </div>
                        <div class="form-check mt-lg-4 mt-4">
                            <input class="form-check-input" type="checkbox" value="" id="checkChecked" checked>
                            <label class="form-check-label" for="checkChecked">
                                Remember this card for future order
                            </label>
                        </div>

                        <div class="div mt-lg-4 mt-4">
                            <button type="button" class="btn btn-success fs-5 px-lg-5">Done</button>
                            <button type="button" class="btn btn-outline-success  fs-5 px-lg-5" >Cancel</button>
                        </div>
                        <hr class=" mt-lg-4 mt-4">
                        <div class="d-flex justify-content-between align-items-center mt-lg-4 mt-4">
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="radioDefault" id="radioDefault1">
                                <label class="form-check-label" for="radioDefault1">
                                    PayPal
                                </label>
                            </div>
                            <div class="div">
                                <img src="./images/Login/image 820.png" alt="">
                            </div>
                        </div>
                        <button class="btn placeOrderBtn mt-lg-5 mt-5" type="button" >
                            Place Order
                        </button>

                    </form> -->
                </div>
            </div>
        </div>


        <!-- checkout footer section  -->
        <div class="container-fluid footerBackgroundIMG  mt-lg-5 mt-5 ">
            <div class="container pt-5">
                <div class="text-center">
                    <h3 class="footHead1">Excellent</h3>
                    <div class="star-rating text-center mt-3">
                        <i class="fa-regular fa-star" style="color: #fcfcfc; background-color: #00A859; width: 47px; height: 35px;" ></i>
                        <i class="fa-regular fa-star" style="color: #fcfcfc; background-color: #00A859; width: 47px; height: 35px;"></i>
                        <i class="fa-regular fa-star" style="color: #fcfcfc; background-color: #00A859; width: 47px; height: 35px;"></i>
                        <i class="fa-regular fa-star" style="color: #fcfcfc; background-color: #00A859; width: 47px; height: 35px;"></i>
                        <i class="fa-regular fa-star" style="color: #fcfcfc; background-color: #00A859; width: 47px; height: 35px;"></i>
                    </div>
                    <p class="CustomP-14-400 text-white mt-3">Based on 13,586 reviews</p>
                    <div>
                        <span><i class="fa-solid fa-star" style="color: #047c58; width: 35px; height: 25px;"></i></span>
                        <span class="text-white fs-5">Trustpilot</span>
                    </div>
                </div>
                <div class="row mt-lg-5 mt-5 pt-lg-3">
                    <div class="col-sm-12 col-md-6 col-lg-3">
                        <div class="div text-white">
                        <p class="customFotterp">Customer Service</p>
                        <p class="CustomP-16-400">Order Lookup</p>
                        <p class="CustomP-16-400">Bulk Order</p>
                        <p class="CustomP-16-400">Shipping & Delivery</p>
                        <p class="CustomP-16-400">Discounts</p>
                        </div>
                    </div>
                    <div class="col-sm-12 col-md-6 col-lg-3">
                        <div class="div text-white">
                        <p class="customFotterp">About Us</p>
                        <p class="CustomP-16-400">News & Blogs</p>
                        <p class="CustomP-16-400">Supplier</p>
                        <p class="CustomP-16-400">Terms & condition</p>
                        <p class="CustomP-16-400">Privacy Policy</p>
                        </div>
                    </div>
                    <div class="col-sm-12 col-md-6 col-lg-2">
                        <div class="div text-white">
                        <p class="customFotterp">Need Help?</p>
                        <p class="CustomP-16-400">Contact Us</p>
                        <p class="CustomP-16-400">FAQs</p>
                        </div>
                    </div>
                    <div class="col-sm-12 col-md-6 col-lg-2">
                        <div class="div text-white">
                        <p class="customFotterp">Privacy</p>
                        <p class="CustomP-16-400">Terms & Condition</p>
                        <p class="CustomP-16-400">Privacy Polivcy</p>
                        </div>
                    </div>
                    <div class="col-sm-12 col-md-6 col-lg-2 my-lg-5 my-5">
                        <div class="div text-white">
                            <p class="customFotterp">Follow Us</p>
                            <img src="./images/Social.png" alt="">
                            </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="container-fluid FooterbackG">
            <div class="container py-lg-4">
                <div class="row align-items-center">
                    <div class="col-sm-12 col-md-12 col-lg-4 col-xl-4 mt-lg-0 mt-3">
                        <img src="./images/Foodies logo without Banner 1.png" style="width: 40px; height: 40px" alt="">
                    </div>
                    <div class="col-sm-12 col-md-12 col-lg-3 col-xl-3 mt-lg-0 mt-3">
                     <img src="./images/pay.png" alt="">
                    </div>
                    <div class="col-sm-12 col-md-12 col-lg-5 col-xl-5 mt-lg-0 mt-3">
                     <small>Copyright Â© 2024 FoodieAmazon. All Rights Reserved</small>
                    </div>
                </div>
            </div>
      </div>

    </main>
    




    <script>
            document.addEventListener('DOMContentLoaded', () => {
        const logoutBtn = document.getElementById('logoutBtn');
        const loginBadge = document.getElementById('loginBadge');

        // Safe initialization of badge on load
        if (loginBadge) {
          const token = localStorage.getItem('key');
          const email = localStorage.getItem('customerEmail') || '';
          if (token) {
            loginBadge.style.display = 'inline-block';
            if (email) loginBadge.textContent = email.charAt(0).toUpperCase();
          } else {
            loginBadge.style.display = 'none';
          }
        }

        // If no button found, bail out (prevents null errors)
        if (!logoutBtn) {
          console.warn('logoutBtn not found in DOM.');
          return;
        }

        // Optional: debug log so you can confirm handler is attached
        console.log('logout button initialized');

        // Attach click listener
        logoutBtn.addEventListener('click', (e) => {
          // quick debug log
          console.log('logoutBtn clicked', e);

          // Show confirmation
          Swal.fire({
            title: 'Are you sure you want to log out?',
            icon: 'warning',
            showCancelButton: true,
            confirmButtonText: 'Yes, Logout',
            cancelButtonText: 'No',
            confirmButtonColor: "#d33",
            cancelButtonColor: "#3085d6"
          }).then((result) => {
            if (result.isConfirmed) {
              // Clear localStorage keys
              localStorage.removeItem("key");
              localStorage.removeItem("customerloginid");
              localStorage.removeItem("customerid");
              localStorage.removeItem("cart");
              localStorage.removeItem("site_cart_v1");

              // hide badge if present
              if (loginBadge) loginBadge.style.display = 'none';

              // show success and redirect
              Swal.fire({
                icon: 'success',
                title: 'Logged Out',
                text: 'You have been successfully logged out.',
                timer: 1200,
                showConfirmButton: false
              });

              setTimeout(() => { window.location.href = 'login.html'; }, 1200);
            }
          });
        }, { passive: true });
      });

    </script>







    <script src="https://js.paystack.co/v1/inline.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/js/bootstrap.min.js" integrity="sha384-RuyvpeZCxMJCqVUGFI0Do1mQrods/hhxYlcVfGPOfQtPJh0JCw12tUAZ/Mv10S7D" crossorigin="anonymous"></script> 
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/js/all.min.js" integrity="sha512-b+nQTCdtTBIRIbraqNEwsjB6UvL3UEMkXnhzd8awtCYh0Kcsjl9uEgwVFVbhoj3uu1DO1ZMacNvLoyJJiNfcvg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="./js/index.js"></script>
    <script src="./js/checkout.js"></script>
    </body>
</html>